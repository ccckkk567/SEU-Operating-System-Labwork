#include "types.h"   // 包含类型定义
#include "stat.h"    // 包含文件状态定义
#include "user.h"    // 包含用户程序接口
#include "fs.h"      // 包含文件系统接口

/**
 * 空指针解引用测试程序
 * 
 * 本程序用于测试xv6操作系统对空指针解引用的处理。
 * 在修改前的xv6中，解引用空指针会访问地址0处的内容，这可能导致未定义行为。
 * 在修改后的xv6中，地址0所在的第一页被设置为不可访问，
 * 因此解引用空指针会触发页面错误，导致程序终止。
 * 
 * 测试步骤：
 * 1. 声明一个指向地址0的指针
 * 2. 尝试打印指针的值（应该是0）
 * 3. 尝试解引用该指针（应该触发页面错误）
 * 
 * 预期结果：
 * - 程序应该能打印出指针的值（0）
 * - 当尝试解引用空指针时，程序应该被终止
 */
int main(int argc, char *argv[]) {
    // 创建一个指向地址0的指针（空指针）
    uint* nullp = (uint*) 0;
    
    // 打印指针的值和尝试解引用
    // %x表示以16进制格式输出
    // 第一个%x会打印nullp的值（应该是0）
    // 第二个%x尝试打印*nullp的值（应该触发页面错误）
    printf(1, "%x %x\n", nullp, *nullp);

    // 注意：这行代码正常情况下不会被执行到
    // 因为程序会在解引用空指针时被终止
    exit();
}